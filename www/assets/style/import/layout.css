/**
 * layout.css
 *
 * Default CSS Manifest modified from Snook's
 * Scalable and Modular Architecture for CSS
 * http://smacss.com/book/
 */
/* ==============================================================================================
  LAYOUT  - How the page is divided into sections including header, main, aside, nav, footer.
         example: screen-width:1024/16px : @media only screen and (min-width: 64em) { }
  ============================================================================================ */

  
  :root {
    --block-spacing: .125rem;
    --header-height: 3rem;
    --hero-height: 100vw;
  } @media  screen and (min-width: 32rem) { /*512px*/
    :root { --block-spacing: .25rem; }
  } @media screen and (orientation: landscape) {
    :root { --hero-height: 75vh; }
  } @media  screen and (min-width: 45rem) { /*720px*/
    :root {
      --block-spacing: .5rem;
      --hero-height: 75vh;
    }
  } @media  screen and (min-width: 48rem) { /*768px*/
    :root { --block-spacing: 1rem; }
  }

  body.data, body:has( > header.hero ) {
    scroll-snap-type: y mandatory;
  } body > header.hero {
    scroll-snap-stop: always;
    scroll-snap-align: end;
    scroll-margin-block-end: var(--header-height);
  } body.data > main:has( > form:only-child ) {
    scroll-snap-stop: always;
    scroll-snap-align: start;
  }

  body {
    position: relative;
      display: grid;
      grid-template-columns:
        [full-start] var(--block-spacing)
          [app-start] 0
            [main] 1fr
          0 [app-end]
        var(--block-spacing) [full-end];
      grid-template-rows: auto;
      column-gap: var(--block-spacing);
    } @media  screen and (min-width: 42rem) { /*672px*/
    body {
      grid-template-columns:
        [full-start] var(--block-spacing)
          [app-start] auto
              [main-left] 20rem
              [main-right] 20rem
          auto [app-end]
        var(--block-spacing) [full-end];
    } 
  } @media screen and (min-width: 70rem) { /*1120px*/
    body {
      grid-template-columns:
      [full-start] var(--block-spacing)
          [app-start] auto
              [main-left] 20rem
              [main-right] 20rem
              [aside] 20rem
          auto [app-end]
        var(--block-spacing) [full-end];
    }    
  }

  body > a, body > nav { position: fixed;
  } body > *:not(a, nav, main, body > article) {
    display: grid; grid-template-columns: subgrid;
  } body > main {
    grid-area: main; grid-row: auto;
  } body > aside, body > article {
    grid-area: main; grid-row: auto;
  } body > header, body > footer {
    grid-area: full; grid-row: auto;
  } body > header > * {
    grid-area: app; grid-row: auto;
  } body > footer > * {
    grid-area: main; grid-row: auto;
  } @media  screen and (min-width: 42rem) { /*672px*/
    body > main, body > aside, body > article,
    body > footer > * {
      grid-column: main-left / span 2; grid-row: auto;
    } body > footer > address { grid-area: main-left;
    } body > footer > nav { grid-area: main-right; }
  } @media screen and (min-width: 70rem) { /*1120px*/
    body:not(.index) > main > header.hero {
      position: relative; z-index: 1;
      width: calc(150% + (var(--block-spacing)/2));
    }
    body.index > main { grid-column: main-left / span 3; }
    body.index > #site-aside {
      grid-column: main-left / span 3; grid-row: auto;
    } body:not(.index) > #site-aside {
      display: flex; flex-direction: column;
      gap: var(--block-spacing);
      grid-area: aside; grid-row: 2;
    } body:not(.index):has( > main > header.hero ) > aside {
      margin-top: var(--hero-height);
    }
    body > article {grid-column: main-left / span 3; }
    body > footer > nav {
      grid-column: main-right / span 2;
      columns: 2; column-gap: var(--block-spacing);
    }
  }

  body > header { height: var(--header-height); }

  body > main:has( > form:only-child ) {
    display: grid; grid-area: full;
    margin: var(--block-spacing) 0;
  } body.data > main:has( > form:only-child ) { grid-row: 2; }
  /* body > main > form { padding: var(--block-spacing); }    */

  body > article { 
    margin: var(--block-spacing) calc(var(--block-spacing)*-1);
    padding: var(--block-spacing);
  }

  body > main > form {
    height: calc(100svh - (var(--header-height) + (var(--block-spacing)*2)));
  }

  header.hero {
    height: var(--hero-height);
    overflow: visible;
  } header.hero::before {
    content: ''; position: absolute; z-index: -1;
    width: 100vw; height: var(--hero-height);
    background: inherit;
  }
